(library
 (name sxfiler_bin_lib)
 (public_name sxfiler.bin.lib)
 (libraries sxfiler.domain
            migemocaml
            logs
            re)
 (modules migemo_completer)
 (preprocess (pps lwt_ppx)))

(executable
 (name main)
 (public_name sxfiler_server)
 (package sxfiler)
 (modules main dependencies jsonrpc_server global procedures)
 (libraries lwt
            websocket
            websocket-lwt-unix.cohttp
            logs.fmt
            jsonrpc-ocaml.yojson
            sxfiler.server
            sxfiler.server.task
            sxfiler.bin.lib)
 (preprocess (pps lwt_ppx)))
